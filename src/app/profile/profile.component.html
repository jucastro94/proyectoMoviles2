<div class="main" *ngIf="loggedUser">
    <h2>PERFIL</h2>
    <form [formGroup]="control">
        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label># ID</mat-label>
                <input matInput formControlName="id" readonly>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Rol</mat-label>
                <mat-select formControlName="role">
                    <mat-option value="Empleado">Empleado</mat-option>
                    <mat-option value="Administrador">Administrador</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Nombres</mat-label>
                <input matInput formControlName="name">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Apellidos</mat-label>
                <input matInput formControlName="lastname">
            </mat-form-field>
        </div>
        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Documento</mat-label>
                <input matInput formControlName="document">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Tipo de documento</mat-label>
                <mat-select formControlName="typeDocument">
                    <mat-option value="C.C.">C.C.</mat-option>
                    <mat-option value="T.I.">T.I.</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="row">
            <mat-checkbox formControlName="manageUsers">
                Manejo de usuarios
            </mat-checkbox>
            <mat-checkbox formControlName="watchReports">
                Acceso a reportes
            </mat-checkbox>
        </div>

        <mat-form-field appearance="outline">
            <mat-label>Correo</mat-label>
            <input matInput formControlName="email" type="email">
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Fecha nacimiento</mat-label>
            <input matInput formControlName="bornDate" type="date">
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Cargo</mat-label>
            <input matInput formControlName="position">
        </mat-form-field>

        <button 
            mat-raised-button 
            color="accent" 
            (click)="modifyBody()" 
            [disabled]="control.invalid" 
            *ngIf="!isNew"
        >
            Modificar
        </button>
        <button 
            mat-raised-button 
            color="primary"
            (click)="createBody()" 
            *ngIf="isNew"
        >
            Crear
        </button>
    </form>

    <mat-divider></mat-divider>

    <h2>Modificar contrasena</h2>
    <form [formGroup]="passwordManager">
        <mat-form-field appearance="outline">
            <mat-label>Contrasena actual</mat-label>
            <input matInput type="password" formControlName="oldPassword">
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Nueva contrasena</mat-label>
            <input matInput type="password" formControlName="newPassword">
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Confirmar contrasena</mat-label>
            <input matInput type="password" formControlName="confirmPassword">
        </mat-form-field>

        <button mat-stroked-button color="warn" (click)="changePassword()" [disabled]="passwordManager.invalid">
            Actualizar Contrasena
        </button>
    </form>

    <button mat-raised-button color="warn" *ngIf="showDelete" (click)="deleteUser()">
        Eliminar
    </button>
</div>